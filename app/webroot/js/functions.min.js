function loadFunctions(){loadFancybox();profileImageEffect();loadDatepicker();changeVisible();changeFeatured();loadTabs();loadMaps();loadAccordion();loadSelect2();
autoSavedForm();loadDinamicTable();}function loadFancybox(){$(".fancybox").fancybox({openEffect:"none"});}function profileImageEffect(){$(".input.file input[type=file]").change(function(){var c=$(this)[0].files;
var a=$(this).parent().parent().find(".filename");if(c.length>0){a.find("p.title").html("Archivos seleccionados");a.find("p.file").remove();}for(var b=0;
b<c.length;b++){a.append('<p class="file">'+c[b].name+"</p>");}});}function loadDatepicker(){$(".datepicker").datepicker({dateFormat:"dd-mm-yy"});$(".start_date").datepicker({dateFormat:"dd-mm-yy",maxDate:$(".end_date.edit").val(),onClose:function(a){$(".end_date").datepicker("option","minDate",a);
}});$(".end_date").datepicker({dateFormat:"dd-mm-yy",minDate:$(".start_date.edit").val(),onClose:function(a){$(".start_date").datepicker("option","maxDate",a);
}});}function changeVisible(){$(".visible .check").click(function(){var a=$(this);var b=a.attr("id");var c=b.split("-");var d=admin_path+c[0].toLowerCase()+"/change_visible/"+c[1].toLowerCase();
$.post(d,function(e){a.toggleClass("checked");});});}function changeFeatured(){$(".featured .check").click(function(){var a=$(this);var b=a.attr("id");
var c=b.split("-");var d=admin_path+c[0].toLowerCase()+"/change_featured/"+c[1].toLowerCase();$.post(d,function(e){a.toggleClass("checked");});});}function loadTabs(){var a=$(".tabs .header-tabs .tab:first");
a.addClass("current");var b=$(".tabs .content-tabs ."+a.attr("id"));b.show();$(".tabs .header-tabs .tab").click(function(){var d=$(".tabs .header-tabs .tab.current");
var f=$(".tabs .content-tabs ."+d.attr("id"));var c=$(this);if(c.hasClass("current")){return;}var e=$(".tabs .content-tabs ."+c.attr("id"));d.removeClass("current");
c.addClass("current");f.slideUp(500);e.slideDown(500);});}function loadMaps(){$(".admin-add .map-canvas").mapsLoader({});$(".admin-form .map .address-search").click(function(){getCoordinates();
});$(".admin-form .map-canvas").mapsLoader({latitude:$(".admin-form .map .latitude").val(),longitude:$(".admin-form .map .longitude").val(),draggableMarker:true,zoom:15});
$(".admin-view .map-canvas").mapsLoader({latitude:$(".admin-view .latitude").val(),longitude:$(".admin-view .longitude").val(),zoom:15});}function getCoordinates(){var c=$(".admin-form .map .address1").val();
var b=$(".admin-form .map .address2").val();var d=$(".admin-form .map .city").val();var a=$(".admin-form .map .province").val();if(c==""||c=="undefined"){$(".map-canvas").mapsLoader({});
}else{$(".map-canvas").mapsLoader({address:c+","+b+","+d,draggableMarker:true,zoom:15});}}function loadSelect2(){$("select").select2({width:"100%"});$(".keywords").select2({width:"100%",tags:[""],tokenSeparators:[","],dropdownCssClass:"hideSearch"});
}function CKupdate(){for(instance in CKEDITOR.instances){CKEDITOR.instances[instance].updateElement();}}function loadAccordion(){$(".accordion-title.closed").next(".accordion-content").hide();
$(".accordion-title").on("click",function(){$(this).toggleClass("closed");if($(this).next(".accordion-content").is(":visible")){$(this).next(".accordion-content").slideToggle();
}if($(this).next(".accordion-content").is(":hidden")){$(this).next(".accordion-content").slideToggle();}});}function autoSavedForm(){var a=$("form.autosave");
if(a.size()>0){setInterval(function(){CKupdate();a.ajaxSubmit({data:{autosave:true},success:function(b){$("#autosave-message").html("Guardado como borrador");
if(a.attr("data-when-autosave")){arr=JSON.parse(b);var c=admin_path+a.attr("data-when-autosave")+"/"+arr.last_id;a.attr("action",c);a.removeAttr("data-when-autosave");
}}});},180000);}}function loadDinamicTable(){addRowEvents=function(){$(".delete-row-table").on("click",function(){var c=admin_path+$(this).attr("data-action");
var b=$(this).closest(".tr");var a=$(this).closest(".tbody");$.post(c,function(d){b.remove();if(a.children(".tr").size()==0){$(".empty-message").fadeIn();
}});});$(".edit-row-table").on("click",function(){var b=admin_path+$(this).attr("data-action");var a=$(this).closest(".tr");$.get(b,function(c){a.html(c);
addRowEvents();});});$("form.ajax-form").submit(function(a){a.preventDefault();var b=$(this).closest(".tr");$(this).ajaxSubmit({success:function(c){console.log(c);
b.html(c);addRowEvents();}});});};$(".add-row-table").on("click",function(){var b=$(this).attr("data-table");var a=$("#"+b);var c=admin_path+$(this).attr("data-action");
$.post(c,function(d){a.find(".empty-message").remove();a.append(d);addRowEvents();});});addRowEvents();}function updateOrderColum(){var a=1;$(".wrapper-sortable .sortable .sort").each(function(){$(this).html(a++);
});}